/* typescript-demo 0.0.1 (2013-06-04) | Outright Mental Inc. - https://github.com/outrightmental/typescript-demo.git */
var __extends=this.__extends||function(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c},AppView=function(a){function b(){a.call(this),this.events={"keypress #new-todo":"createOnEnter","keyup #new-todo":"showTooltip","click .todo-clear a":"clearCompleted","click .mark-all-done":"toggleAllComplete"},this.tooltipTimeout=null,this.setElement($("#todoapp"),!0),_.bindAll(this,"addOne","addAll","render","toggleAllComplete"),this.input=this.$("#new-todo"),this.allCheckbox=this.$(".mark-all-done")[0],this.statsTemplate=_.template($("#stats-template").html()),Todos.bind("add",this.addOne),Todos.bind("reset",this.addAll),Todos.bind("all",this.render),Todos.fetch()}return __extends(b,a),b.prototype.render=function(){var a=Todos.done().length,b=Todos.remaining().length;this.$("#todo-stats").html(this.statsTemplate({total:Todos.length,done:a,remaining:b})),this.allCheckbox.checked=!b},b.prototype.addOne=function(a){var b=new TodoView({model:a});this.$("#todo-list").append(b.render().el)},b.prototype.addAll=function(){Todos.each(this.addOne)},b.prototype.newAttributes=function(){return{content:this.input.val(),order:Todos.nextOrder(),done:!1}},b.prototype.createOnEnter=function(a){13==a.keyCode&&(Todos.create(this.newAttributes()),this.input.val(""))},b.prototype.clearCompleted=function(){return _.each(Todos.done(),function(a){return a.clear()}),!1},b.prototype.showTooltip=function(){var a=$(".ui-tooltip-top"),b=this.input.val();a.fadeOut(),this.tooltipTimeout&&clearTimeout(this.tooltipTimeout),""!=b&&b!=this.input.attr("placeholder")&&(this.tooltipTimeout=_.delay(function(){return a.show().fadeIn()},1e3))},b.prototype.toggleAllComplete=function(){var a=this.allCheckbox.checked;Todos.each(function(b){return b.save({done:a})})},b}(Backbone.View);